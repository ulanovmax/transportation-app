import{d as q,o as h,c as M,b as r,x as v,p as L,q as G,v as J,t as O,l as V,w as S,e as m,g as y,f as w,z as A,u as E,m as T,h as C,A as Q,_ as K,s as P,B as X,C as Z}from"./index-D4__e66l.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as z}from"./AppButton.vue_vue_type_script_setup_true_lang-DpeS_Fbo.js";import{A as H,_ as ee,a as te}from"./RequestForm.vue_vue_type_script_setup_true_lang-DkmN0ptk.js";import{I as B}from"./IconTruckDelivery-Dg2v61YN.js";import{R as x}from"./request-type.enums-D-FXFtyV.js";import{u as Y,A as se}from"./requests.store-DgfNkTJd.js";import{c as $}from"./createVueComponent-BrbIPDhy.js";import{I as ae}from"./IconBoxSeam-tVti65J-.js";const oe="/transportation-app/assets/not-found-JGQ9rmNT.svg",ne=e=>(L("data-v-db0517a7"),e=e(),G(),e),re={class:"flex flex-col items-center"},le=ne(()=>r("div",{class:"box mb-3 max-h-72 min-h-40 min-w-40 max-w-72"},[r("img",{class:"h-full w-full select-none object-contain",src:oe,alt:"Not found"})],-1)),de={class:"text-lg font-medium text-slate-400"},ie=q({__name:"NotFound",props:{msg:{default:"Not found"}},setup(e){return(t,s)=>(h(),M("div",re,[le,r("p",de,v(t.msg),1)]))}}),Dt=U(ie,[["__scopeId","data-v-db0517a7"]]);var ce=$("calendar-event","IconCalendarEvent",[["path",{d:"M4 5m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 3l0 4",key:"svg-1"}],["path",{d:"M8 3l0 4",key:"svg-2"}],["path",{d:"M4 11l16 0",key:"svg-3"}],["path",{d:"M8 15h2v2h-2z",key:"svg-4"}]]),ue=$("category","IconCategory",[["path",{d:"M4 4h6v6h-6z",key:"svg-0"}],["path",{d:"M14 4h6v6h-6z",key:"svg-1"}],["path",{d:"M4 14h6v6h-6z",key:"svg-2"}],["path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-3"}]]),W=$("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),pe=$("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]),fe=$("user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]),me=$("users-group","IconUsersGroup",[["path",{d:"M10 13a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M8 21v-1a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v1",key:"svg-1"}],["path",{d:"M15 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-2"}],["path",{d:"M17 10h2a2 2 0 0 1 2 2v1",key:"svg-3"}],["path",{d:"M5 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-4"}],["path",{d:"M3 13v-1a2 2 0 0 1 2 -2h2",key:"svg-5"}]]);const ye={},he={class:"inline-flex items-center rounded-md bg-blue-800 px-2 py-1 text-sm font-medium"};function ve(e,t){return h(),M("span",he,[J(e.$slots,"default")])}const ge=U(ye,[["render",ve]]),_e={class:"flex flex-col items-center pb-3 pt-5"},De=r("h2",{class:"mb-5 text-center text-xl"}," Are you sure you want to delete? ",-1),ke={class:"mb-8 flex items-center gap-2 text-slate-400"},be={class:"text-lg"},we={class:"text-lg"},Me={class:"flex gap-4"},Ce=q({__name:"DeleteRequestModal",props:{modelValue:{type:Boolean},fromCity:{},toCity:{}},emits:["update:modelValue","delete"],setup(e,{emit:t}){const s=e,l=t,a=O({get(){return s.modelValue},set(o){l("update:modelValue",o)}});return(o,c)=>(h(),V(H,{modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=p=>a.value=p),size:"sm",header:!1},{default:S(({close:p})=>[r("div",_e,[De,r("div",ke,[r("h3",be,v(o.fromCity),1),m(y(B)),r("h3",we,v(o.toCity),1)]),r("div",Me,[m(z,{variant:"secondary",onClick:p},{default:S(()=>[w(" Cancel ")]),_:2},1032,["onClick"]),m(z,{variant:"error",onClick:c[0]||(c[0]=u=>l("delete"))},{default:S(()=>[w(" Delete ")]),_:1})])])]),_:1},8,["modelValue"]))}}),xe={class:"flex items-center gap-3"},Oe=r("h3",{class:"text-xl"},"Edit request",-1),Se=q({__name:"EditRequestModal",props:{data:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const{editExistedRequest:s}=Y(),l=A(),a=e,o=t,c=O({get(){return a.modelValue},set(d){o("update:modelValue",d)}}),p={fromCity:a.data.fromCity,toCity:a.data.toCity,dateDispatch:a.data.dateDispatch,category:a.data.category,description:a.data.description},u=d=>{const{dateDispatch:f,fromCity:g,toCity:_}=d,i={dateDispatch:f,fromCity:g,toCity:_};a.data.type===x.Order&&(i.description=d.description,i.category=d.category),s(a.data.id,i),l.success("Request is successfully updated"),c.value=!1};return(d,f)=>(h(),V(H,{modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=g=>c.value=g)},{header:S(()=>[r("div",xe,[Oe,m(y(W),{class:"opacity-60"})])]),default:S(()=>[m(ee,{"default-values":p,type:d.data.type,"button-label":"Update",onSubmit:u},null,8,["type"])]),_:1},8,["modelValue"]))}}),Ve=e=>{const{requestsList:t}=Y();return t.filter(s=>{if(s.user.id===e.user.id)return!1;const l=new Date(e.dateDispatch),a=new Date(s.dateDispatch),o=e.toCity===s.toCity&&e.fromCity===s.fromCity,c=e.type===x.Delivery?l<=a:l>=a;return e.type!==s.type&&o&&c})},$e=e=>e===x.Delivery?"orders":"deliveries",Ie={class:"rounded-lg bg-white shadow-lg transition-shadow hover:shadow-2xl"},Ne={class:"card relative flex h-full flex-col"},Re={class:"flex items-center justify-between gap-4 rounded-t-lg bg-blue-500 p-3 text-white"},qe={class:"flex items-center gap-4"},Te={class:"text-lg"},Ye={class:"text-lg"},ze={class:"flex gap-3"},Be={class:"relative flex flex-grow flex-col overflow-hidden p-3 pt-5"},Ue={class:"mb-5 space-y-3"},Fe={key:0,class:"flex items-center gap-2 text-base font-medium"},Ae={class:"flex items-center gap-2 text-base font-medium"},Ee={key:1,class:"flex items-center gap-2 text-base font-medium"},He={class:"flex items-center gap-2 text-base font-medium"},We={key:0,class:"description mb-5 break-words text-base opacity-80"},je={key:1,class:"mt-auto flex gap-3"},Le=q({__name:"RequestCard",props:{data:{},editable:{type:Boolean}},emits:["select","delete"],setup(e,{emit:t}){const s=Q(()=>K(()=>import("./ActionsButton-DxabiBI1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),l=A(),a=t,o=e,{user:c}=E(),{deleteRequest:p}=Y(),u=T(!1),d=T(!1),f=O(()=>o.data.user.id===c.id),g=O(()=>Ve(o.data)),_=O(()=>$e(o.data.type)),i=[{label:"Edit",icon:W,click:()=>{u.value=!0}},{label:"Delete",icon:pe,click:()=>{d.value=!0}}],D=()=>{p(o.data.id),a("delete",o.data.id),l.success("Request is successfully deleted"),d.value=!1};return(n,b)=>(h(),M("div",Ie,[r("div",Ne,[r("div",Re,[r("div",qe,[r("h3",Te,v(n.data.fromCity),1),m(y(B)),r("h3",Ye,v(n.data.toCity),1)]),r("div",ze,[m(ge,{class:"capitalize"},{default:S(()=>[w(v(n.data.type),1)]),_:1}),n.editable?(h(),V(y(s),{key:0,options:i})):C("",!0)])]),r("div",Be,[r("ul",Ue,[n.data.user&&!n.editable?(h(),M("li",Fe,[m(y(fe),{size:20,class:"text-slate-800 opacity-50"}),w(" "+v(f.value?"Your request":n.data.user.name),1)])):C("",!0),r("li",Ae,[m(y(ce),{size:20,class:"text-slate-800 opacity-50"}),w(" "+v(n.data.dateDispatch),1)]),n.data.type===y(x).Order?(h(),M("li",Ee,[m(y(ue),{size:20,class:"text-slate-800 opacity-50"}),w(" "+v(n.data.category),1)])):C("",!0),r("li",He,[m(y(me),{size:20,class:"text-slate-800 opacity-50"}),w(" "+v(g.value.length)+" matching "+v(_.value),1)])]),n.data.type===y(x).Order?(h(),M("p",We,v(n.data.description?n.data.description:"No description"),1)):C("",!0),n.editable?(h(),M("div",je,[m(z,{size:"sm",onClick:b[0]||(b[0]=I=>a("select",n.data))},{default:S(()=>[w(" Show more ")]),_:1})])):C("",!0),n.data.type===y(x).Order?(h(),V(y(ae),{key:2,class:"icon"})):n.data.type===y(x).Delivery?(h(),V(y(B),{key:3,class:"icon"})):C("",!0)])]),n.editable&&u.value?(h(),V(Se,{key:0,modelValue:u.value,"onUpdate:modelValue":b[1]||(b[1]=I=>u.value=I),data:n.data},null,8,["modelValue","data"])):C("",!0),m(Ce,{modelValue:d.value,"onUpdate:modelValue":b[2]||(b[2]=I=>d.value=I),"to-city":n.data.toCity,"from-city":n.data.fromCity,onDelete:b[3]||(b[3]=I=>D())},null,8,["modelValue","to-city","from-city"])]))}}),kt=U(Le,[["__scopeId","data-v-7e4a93b4"]]);function k(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function R(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ge(e,t){const s=k(e);return isNaN(t)?R(e,NaN):(t&&s.setDate(s.getDate()+t),s)}function Je(e,t){const s=k(e);if(isNaN(t))return R(e,NaN);if(!t)return s;const l=s.getDate(),a=R(e,s.getTime());a.setMonth(s.getMonth()+t+1,0);const o=a.getDate();return l>=o?a:(s.setFullYear(a.getFullYear(),a.getMonth(),l),s)}let Qe={};function j(){return Qe}function Ke(e,t){var p,u,d,f;const s=j(),l=(t==null?void 0:t.weekStartsOn)??((u=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:u.weekStartsOn)??s.weekStartsOn??((f=(d=s.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,a=k(e),o=a.getDay(),c=(o<l?7:0)+o-l;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function Pe(e){const t=k(e);return t.setHours(0,0,0,0),t}function Xe(e){const t=k(e);return t.setHours(23,59,59,999),t}function Ze(e){const t=k(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function et(e){const t=k(e);return t.setDate(1),t.setHours(0,0,0,0),t}function tt(e){const t=k(e),s=t.getFullYear();return t.setFullYear(s+1,0,0),t.setHours(23,59,59,999),t}function st(e){const t=k(e),s=R(e,0);return s.setFullYear(t.getFullYear(),0,1),s.setHours(0,0,0,0),s}function at(e,t){var p,u,d,f;const s=j(),l=(t==null?void 0:t.weekStartsOn)??((u=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:u.weekStartsOn)??s.weekStartsOn??((f=(d=s.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,a=k(e),o=a.getDay(),c=(o<l?-7:0)+6-(o-l);return a.setDate(a.getDate()+c),a.setHours(23,59,59,999),a}function ot(){return Xe(Date.now())}function nt(e,t){return Ge(e,-t)}function rt(){return Pe(Date.now())}function lt(e,t){return Je(e,-t)}function F(e,t){const{years:s=0,months:l=0,weeks:a=0,days:o=0,hours:c=0,minutes:p=0,seconds:u=0}=t,d=lt(e,l+s*12),f=nt(d,o+a*7),g=p+c*60,i=(u+g*60)*1e3;return R(e,f.getTime()-i)}var N=(e=>(e.Day="Day",e.Week="Week",e.Month="Month",e.Year="Year",e))(N||{});const dt=e=>{switch(e){case N.Day:return{from:rt(),to:ot()};case N.Week:return{from:Ke(F(new Date,{weeks:1})),to:at(F(new Date,{weeks:1}))};case N.Month:return{from:et(new Date),to:Ze(new Date)};case N.Year:return{from:st(new Date),to:tt(new Date)}}},it={class:"flex gap-5"},ct={class:"hover-link fade-down absolute top-full",type:"reset"},bt=q({__name:"FilterRequestsForm",props:{sortByUser:{type:Boolean}},emits:["change"],setup(e,{emit:t}){const s=t,l=e,a=T(""),o=T(""),c=O(()=>a.value||o.value),p=Y(),{requestsList:u}=P(p),{user:d}=E(),f=()=>{o.value="",a.value="",s("change",g.value)},g=O(()=>{let _=u.value;if(l.sortByUser&&(_=u.value.filter(i=>i.user.id===d.id)),o.value){const{from:i,to:D}=dt(o.value);_=[..._.filter(n=>new Date(n.dateCreated)<=new Date(D)&&new Date(n.dateCreated)>=new Date(i))]}return a.value?_.filter(i=>i.dateDispatch===a.value):_});return(_,i)=>(h(),M("form",{class:"relative mb-10",onReset:f},[r("div",it,[m(se,{modelValue:a.value,"onUpdate:modelValue":[i[0]||(i[0]=D=>a.value=D),i[1]||(i[1]=D=>s("change",g.value))],label:"Search by dispatch date",type:"date"},null,8,["modelValue"]),m(te,{modelValue:o.value,"onUpdate:modelValue":[i[2]||(i[2]=D=>o.value=D),i[3]||(i[3]=D=>s("change",g.value))],placeholder:"Sort by",label:"Sorting",class:"w-fit",options:["Day","Week","Month","Year"]},null,8,["modelValue"])]),X(r("button",ct," Reset ",512),[[Z,c.value]])],32))}});export{ge as A,ce as I,Dt as N,kt as R,bt as _,ue as a,$e as b,Ve as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ActionsButton-DxabiBI1.js","assets/index-D4__e66l.js","assets/index-C-Mvstp6.css","assets/AppButton.vue_vue_type_script_setup_true_lang-DpeS_Fbo.js","assets/RequestForm.vue_vue_type_script_setup_true_lang-DkmN0ptk.js","assets/requests.store-DgfNkTJd.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/requests-9qKiOxQj.css","assets/createVueComponent-BrbIPDhy.js","assets/request-type.enums-D-FXFtyV.js","assets/RequestForm-90IZ5eyG.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=FilterRequestsForm.vue_vue_type_script_setup_true_lang-D9Sd_pa9.js.map
